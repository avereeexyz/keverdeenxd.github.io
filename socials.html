<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Socials Â· KatnissOS</title>
  <link rel="stylesheet" href="style.css" />
  <script src="script.js"></script>
</head>

<body>
<div class="page-fragment">
  <h1>Socials & presence</h1>
  <p>
    Hereâ€™s where I exist when Iâ€™m not just a glowing window in your browser.  
    Discord presence updates live using the Lanyard REST API.
  </p>

  <section class="card" style="display:flex;gap:16px;align-items:center;">
    <div class="presence-orb">
      <img src="https://cdn.discordapp.com/avatars/1454841600974000159/a8356aab1bfdecec620f9050c0a70751.webp?size=1024" width="56px" height="56px" style="border-radius: 50%;"/>
      <span class="presence-status"></span>
    </div>
    <div>
      <div style="font-size:14px;font-weight:500;">Discord</div>
      <div style="font-size:13px;color:var(--muted);">
        <span>@katnissxd</span>
      </div>
      <div style="font-size:12px;margin-top:4px;" data-lanyard-activity>
        Loading presenceâ€¦
      </div>
    </div>
  </section>

  <section class="card">
    <h2 style="font-size:18px;margin-top:0;">Links</h2>
    <ul class="social-list">
      <li>
        <span>Blog</span>
        <a class="social-link" href="http://blog.katnissxd.xyz" target="_blank">blog.katnissxd.xyz</a>
      </li>
    </ul>
  </section>

  <!-- Hidden Mimi Easter Egg disguised as system logs -->
  <section class="card" style="font-family:monospace;font-size:11px;opacity:0.55;">
    <h2 style="font-size:14px;margin-top:0;">system.log</h2>
    <p class="muted" style="white-space:pre-line;">
[SYS.LOG] Notice: Background process â€œmimi_linkâ€ remains stable.
[SYS.LOG] Status: Connection persistent across all sessions.
[SYS.LOG] Detail: User reports elevated calm + warmth when process is active.
[SYS.LOG] HiddenFlag: This isnâ€™t a bug â€” itâ€™s because I love you, Mimi.
    </p>
  </section>
</div>

<!-- Dock -->
<div class="dock">
  <a href="index.html" class="dock-item" title="Desktop">âŒ˜</a>
  <a href="about.html" class="dock-item" title="About">ğŸ“</a>
  <a href="socials.html" class="dock-item active" title="Socials">ğŸŒ</a>
  <a href="http://blog.katnissxd.xyz" class="dock-item" title="Blog" target="_blank">ğŸ“</a>
</div>

<!-- Inline presence script using your exact URL -->
<script>
  async function loadPresence() {
    const url = "https://api.lanyard.rest/v1/users/1454841600974000159";

    try {
      const response = await fetch(url);
      const data = await response.json();

      if (!data.success) return;

      const presence = data.data;

      const statusEl = document.querySelector(".presence-status");
      const activityEl = document.querySelector("[data-lanyard-activity]");

      // Update status class
      if (statusEl) {
        statusEl.className = "presence-status " + presence.discord_status;
      }

      // Update activity text
      if (activityEl) {
        if (presence.activities && presence.activities.length > 0) {
          activityEl.textContent = presence.activities[0].name;
        } else {
          activityEl.textContent = "Online";
        }
      }

    } catch (err) {
      console.error("Presence fetch error:", err);
    }
  }

  // Load immediately
  loadPresence();

  // Refresh every 15 seconds
  setInterval(loadPresence, 15000);
</script>

</body>
</html>
